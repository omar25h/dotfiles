local lspconfig = require'lspconfig'
local completion = require'completion'

local root_pattern = lspconfig.util.root_pattern

-------------------------------------------------------------------------------------------------
-- Rust
-------------------------------------------------------------------------------------------------

lspconfig.rust_analyzer.setup{
  on_attach = completion.on_attach,
}

-------------------------------------------------------------------------------------------------
-- C/C++/Objective-C
-------------------------------------------------------------------------------------------------

lspconfig.ccls.setup{
  on_attach = completion.on_attach,
}

-------------------------------------------------------------------------------------------------
-- Golang
-------------------------------------------------------------------------------------------------

lspconfig.gopls.setup{
  on_attach = completion.on_attach,
}

-------------------------------------------------------------------------------------------------
-- JavaScript/TypeScript
-------------------------------------------------------------------------------------------------

lspconfig.tsserver.setup{
  on_attach = completion.on_attach,
}

-------------------------------------------------------------------------------------------------
-- JSON
-------------------------------------------------------------------------------------------------

lspconfig.jsonls.setup{
  on_attach = completion.on_attach,
}

-------------------------------------------------------------------------------------------------
-- Scala
-------------------------------------------------------------------------------------------------

lspconfig.metals.setup{
  on_attach = completion.on_attach,
}

-------------------------------------------------------------------------------------------------
-- LaTex
-------------------------------------------------------------------------------------------------

lspconfig.texlab.setup{
  on_attach = completion.on_attach,
  settings = {
    latex = {
      build = {
        args = { 
          "-pdf",
          "-interaction=nonstopmode",
          "-synctex=1",
          "-output-directory=dist",
        },
        onSave = true,
      },
    },
  },
}

-------------------------------------------------------------------------------------------------
-- Treesitter
-------------------------------------------------------------------------------------------------

require'nvim-treesitter.configs'.setup {
  ensure_installed = "all",
  highlight = {
    enable = true,
  },
}
