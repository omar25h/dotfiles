# Set prefix command to Control-\ and secondary to Control-b
set-option -g prefix C-b
set-option -g prefix2 'C-\'

set -g focus-events on
bind -n C-k clear-history

# clear screen
bind C-l send-keys 'C-l'

# C-\ C-\ jumps to the last open window
bind-key 'C-\' last-window

# Use vim keys for movement
set-window-option -g mode-keys vi

# act like vim
setw -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# Set layout
bind | select-layout main-vertical

# Count new windows from 1
set -g base-index 1
set-window-option -g pane-base-index 1

# Renumber windows sequentially after closing any of them
set -g renumber-windows on

# Opent new windows with current path
bind c new -c "#{pane_current_path}"

# Open new splits with current path
bind "\"" split-window -c "#{pane_current_path}" -v
bind % split-window -c "#{pane_current_path}" -h

# Bind key for synchronizing-panes
bind-key y set-window-option synchronize-panes

# Make mouse useful in copy mode
setw -g mouse on
set -g history-limit 10000

# Prevent tmux window from being renamed on command
set-option -g allow-rename off

# Resolve neovim in tmux problems
set -s escape-time 0

# Improve colors
set -g default-terminal 'screen-256color'
set -ga terminal-overrides ",*256col*:Tc"

# Auto-name tabs to current path
set-option -g status-interval 5
set-option -g automatic-rename on
set-option -g automatic-rename-format '#{b:pane_current_path}'

# Set colors
COLOUR_STATUS_BG=colour235
COLOUR_STATUS_FG=colour223

COLOUR_PREFIX_ACTIVE_BG=colour208
COLOUR_PREFIX_ACTIVE_FG=colour237
COLOUR_PREFIX_INACTIVE_BG=colour241
COLOUR_PREFIX_INACTIVE_FG=colour248

COLOUR_WINDOW_ACTIVE_BG=colour214
COLOUR_WINDOW_ACTIVE_FG=colour239
COLOUR_WINDOW_INACTIVE_BG=colour239
COLOUR_WINDOW_INACTIVE_FG=colour223

COLOUR_WINDOW_BELL_BG=colour9
COLOUR_WINDOW_BELL_FG=colour239

COLOUR_PANE_ACTIVE=colour250
COLOUR_PANE_INACTIVE=colour237

COLOUR_DATE_TIME_BG=colour239
COLOUR_DATE_TIME_FG=colour246

COLOUR_MESSAGE_BG=colour239
COLOUR_MESSAGE_FG=colour223

COLOUR_CLOCK=colour109

set-option -g status "on"

set-option -g status-style bg=$COLOUR_STATUS_BG,fg=$COLOUR_STATUS_FG

set-option -g pane-active-border-style fg=$COLOUR_PANE_ACTIVE
set-option -g pane-border-style fg=$COLOUR_PANE_INACTIVE

set-option -g message-style bg=$COLOUR_MESSAGE_BG,fg=$COLOUR_MESSAGE_FG

set-option -g message-command-style bg=$COLOUR_MESSAGE_BG,fg=$COLOUR_MESSAGE_FG

set-option -g display-panes-active-colour $COLOUR_PANE_ACTIVE
set-option -g display-panes-colour $COLOUR_PANE_INACTIVE

set-window-option -g clock-mode-colour $COLOUR_CLOCK

set-option -g status-justify "left"
set-option -g status-left-style none
set-option -g status-left-length "80"
set-option -g status-right-style none
set-option -g status-right-length "80"
set-window-option -g window-status-separator ""

set-option -g status-left "#{?client_prefix,#[fg=$COLOUR_PREFIX_ACTIVE_FG#,bg=$COLOUR_PREFIX_ACTIVE_BG],#[fg=$COLOUR_PREFIX_INACTIVE_FG#,bg=$COLOUR_PREFIX_INACTIVE_BG]} #S \
	#{?client_prefix,#[fg=$COLOUR_PREFIX_ACTIVE_BG],#[fg=$COLOUR_PREFIX_INACTIVE_BG]}#[bg=$COLOUR_STATUS_BG, nobold, noitalics, nounderscore]"

set-option -g status-right "#[fg=$COLOUR_DATE_TIME_BG, bg=$COLOUR_STATUS_BG, nobold, nounderscore, noitalics]\
	#[fg=$COLOUR_DATE_TIME_FG,bg=$COLOUR_DATE_TIME_BG] %Y-%m-%d  %H:%M "

set-window-option -g window-status-current-format "#[fg=$COLOUR_STATUS_BG, bg=$COLOUR_WINDOW_ACTIVE_BG, nobold, noitalics, nounderscore]\
	#[fg=$COLOUR_WINDOW_ACTIVE_FG, bg=$COLOUR_WINDOW_ACTIVE_BG] #I \
	#[fg=$COLOUR_WINDOW_ACTIVE_FG, bg=$COLOUR_WINDOW_ACTIVE_BG, bold] #W \
	#[fg=$COLOUR_WINDOW_ACTIVE_BG, bg=$COLOUR_STATUS_BG, nobold, noitalics, nounderscore]"

set-window-option -g window-status-format "#[fg=$COLOUR_STATUS_BG,bg=#{?window_bell_flag,$COLOUR_WINDOW_BELL_BG,$COLOUR_WINDOW_INACTIVE_BG}]\
	#{?window_bell_flag,#[fg=$COLOUR_WINDOW_BELL_FG#,bg=$COLOUR_WINDOW_BELL_BG],#[fg=$COLOUR_WINDOW_INACTIVE_FG#,bg=$COLOUR_WINDOW_INACTIVE_BG]} #I \
	#{?window_bell_flag,#[fg=$COLOUR_WINDOW_BELL_FG#,bg=$COLOUR_WINDOW_BELL_BG],#[fg=$COLOUR_WINDOW_INACTIVE_FG#,bg=$COLOUR_WINDOW_INACTIVE_BG]} #W \
	#[fg=#{?window_bell_flag,$COLOUR_WINDOW_BELL_BG,$COLOUR_WINDOW_INACTIVE_BG}, bg=$COLOUR_STATUS_BG, noitalics]"

